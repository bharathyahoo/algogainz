# ============================================
# AlgoGainz Backend Environment Configuration
# ============================================

# --------------------------------------------
# Application Settings
# --------------------------------------------
NODE_ENV=development
PORT=3000

# --------------------------------------------
# Frontend URLs (for CORS)
# --------------------------------------------
# Development
FRONTEND_URL=http://localhost:5173

# Production (comma-separated for multiple origins)
ALLOWED_ORIGINS=https://algogainz.vercel.app,https://www.algogainz.com

# --------------------------------------------
# Database Configuration
# --------------------------------------------
# Development (SQLite)
DATABASE_URL="file:./dev.db"

# Production (PostgreSQL)
# DATABASE_URL="postgresql://username:password@host:5432/database?schema=public"
# Example for Render.com, Railway, Supabase, etc.
# DATABASE_URL="postgresql://user:pass@hostname.render.com/algogainz"

# --------------------------------------------
# Zerodha Kite Connect API
# --------------------------------------------
# Get your API credentials from: https://developers.kite.trade/
KITE_API_KEY=your_kite_api_key_here
KITE_API_SECRET=your_kite_api_secret_here
KITE_REDIRECT_URL=http://localhost:3000/api/auth/callback

# Production redirect URL
# KITE_REDIRECT_URL=https://api.algogainz.com/api/auth/callback

# Toggle between real Kite data and mock data
# Set to 'true' to use real Kite API, 'false' to use mock data (default: false)
USE_KITE_REAL_DATA=false

# --------------------------------------------
# JWT Authentication
# --------------------------------------------
# IMPORTANT: Use a strong random secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_minimum_32_characters_long_for_production_security
JWT_EXPIRES_IN=7d

# --------------------------------------------
# Security & Rate Limiting
# --------------------------------------------
# General API rate limit
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Trusted proxy (set to 1 in production if behind Nginx, Cloudflare, etc.)
TRUST_PROXY=false

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
# Enable/disable CORS credentials
CORS_CREDENTIALS=true

# --------------------------------------------
# Logging & Monitoring (Optional)
# --------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# --------------------------------------------
# External Services (Optional)
# --------------------------------------------
# Redis for caching (optional, for production optimization)
# REDIS_URL=redis://localhost:6379

# --------------------------------------------
# AI Features (Optional)
# --------------------------------------------
# AI Provider: openai or openrouter
AI_PROVIDER=openai

# OpenAI API Key (get from: https://platform.openai.com/api-keys)
# OPENAI_API_KEY=sk-your-openai-api-key-here
# Or use OpenRouter (get from: https://openrouter.ai/keys)
# AI_API_KEY=sk-or-v1-your-openrouter-key-here

# AI Model selection
# OpenAI: gpt-4-turbo-preview, gpt-3.5-turbo
# OpenRouter: openai/gpt-4-turbo-preview, anthropic/claude-3-opus, anthropic/claude-3-sonnet
AI_MODEL=gpt-4-turbo-preview

# AI Configuration
AI_MAX_TOKENS=2000
AI_TEMPERATURE=0.7

# Optional: Custom base URL (for OpenRouter or self-hosted)
# AI_BASE_URL=https://openrouter.ai/api/v1

# Feature Flags (set to 'false' to disable specific AI features)
AI_FEATURE_ASSISTANT=true
AI_FEATURE_SENTIMENT=true
AI_FEATURE_RECOMMENDATIONS=true
AI_FEATURE_JOURNAL=true
AI_FEATURE_REPORTS=true

# AI Rate Limiting
AI_RATE_LIMIT_RPM=20
AI_RATE_LIMIT_RPD=1000
AI_RATE_LIMIT_TPM=100000

# App URL (for OpenRouter HTTP-Referer header)
APP_URL=https://algogainz.com

# AWS S3 for report storage (optional)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=algogainz-reports

# --------------------------------------------
# Email/Notifications (Optional)
# --------------------------------------------
# SMTP for email notifications (optional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# SendGrid API (alternative to SMTP)
# SENDGRID_API_KEY=your_sendgrid_api_key

# --------------------------------------------
# Feature Flags (Optional)
# --------------------------------------------
# Enable/disable features
ENABLE_MANUAL_TRANSACTIONS=true
ENABLE_EXIT_STRATEGIES=true
ENABLE_REPORTS=true

# --------------------------------------------
# Development Tools
# --------------------------------------------
# Enable detailed error messages in development
DEBUG=false

# Enable request logging
REQUEST_LOGGING=true

# --------------------------------------------
# Production Deployment Settings
# --------------------------------------------
# These are typically set by your hosting provider

# Railway.app, Render.com auto-set:
# - PORT
# - DATABASE_URL

# Vercel, Netlify auto-set:
# - NODE_ENV=production

# --------------------------------------------
# Security Checklist for Production
# --------------------------------------------
# ✅ Set NODE_ENV=production
# ✅ Use strong JWT_SECRET (32+ characters)
# ✅ Configure PostgreSQL DATABASE_URL
# ✅ Set ALLOWED_ORIGINS to your production domain
# ✅ Set KITE_REDIRECT_URL to production callback URL
# ✅ Enable TRUST_PROXY if behind reverse proxy
# ✅ Remove or comment out development-only variables
# ✅ Never commit .env file to git (use .gitignore)

# --------------------------------------------
# Quick Setup Guide
# --------------------------------------------
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Fill in your Zerodha Kite API credentials
#
# 3. Generate a strong JWT secret:
#    openssl rand -base64 32
#
# 4. Update FRONTEND_URL to match your frontend port
#
# 5. For production:
#    - Set NODE_ENV=production
#    - Use PostgreSQL DATABASE_URL
#    - Configure ALLOWED_ORIGINS
#    - Use strong secrets
